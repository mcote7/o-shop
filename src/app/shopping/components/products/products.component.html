<div class="row">
  <div class="col-md-2">
    
    <div
      class="list-group"
      [class.no-box]="categoriesLoading$|async">
      
      <a 
        class="list-group-item"
        [class.activeLink]="!category"
        routerLink="/">
        All items
      </a>
      
      <div *ngIf="categoriesLoading$|async" class="loading-cats">
        <i class="fa fa-spinner" aria-hidden="true"></i>
      </div>
      
      <a 
        @fadeIn 
        (@fadeIn.done)="isAnimeDone = true" 
        *ngFor="let cat of categories$|async"
        routerLink="/"
        [queryParams]="{category: cat.key}"
        [class.activeLink]="category === cat.key"
        class="list-group-item">
        {{ cat.name }}
        
        <div 
          @popin
          *ngIf="category === cat.key"
          title=" 🍃&nbsp;{{filteredProducts.length}} fresh varieties to choose from in - {{cat.name}}"
          class="float-right cat-item-len">
          (&nbsp;<strong>{{filteredProducts.length}}</strong>&nbsp;)
        </div>
      </a>
    </div>
  </div>
  
  <div class="col">
    <div
      *ngIf="isAnimeDone && filteredProducts"
      [@listAnimationWrapCard]="filteredProducts"
      class="row">
      
      <ng-container
        *ngFor="let p of filteredProducts;
        let i = index;
        let e = even;
        let l = last">
        
        <div class="col-xl-3 col-lg-4 col-md-6">
          <div 
            @listAnimationItemCard
            class="card"
            [class.last-col]="l"
            style="width: 15rem; margin-bottom: 1.5rem;">
            
            <div @popin class="card-options">
              <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
            </div>
            
            <img [src]="p.imageUrl" class="card-img-top" alt="&nbsp; 🤷‍♂️ image not found">
            
            <div class="card-body">
              
              <h5 class="card-title">{{p.title}}</h5>
              
              <p class="card-text">{{p.category}}</p>
              
              <p class="card-text"><strong>{{ p.price | currency:'USD':'symbol' }}</strong></p>
              
              <div class="btm-btns-wrp">
                
                <button 
                  *ngIf="getQuantity(p) === 0; else updateQuantity"
                  @popin
                  (click)="addToCart(p)" 
                  class="btn btn-card">
                  Add to cart
                </button>
                
                <ng-template #updateQuantity>
                  
                  <button 
                    @slideInTop 
                    (click)="removeFromCart(p, i.toString())"
                    class="btn btn-paddle pad-left">
                    <i class="fa fa-minus" aria-hidden="true"></i>
                  </button>
                  
                  <div @slideInTop class="handle-left"></div>
                  
                  <button 
                    @slideInTop 
                    id="{{i}}"
                    class="btn btn-card-cart">
                    <strong>{{getQuantity(p)}}</strong>
                  </button>
                  
                  <div @slideInTop class="handle-right"></div>
                  
                  <button 
                    @slideInTop 
                    (click)="addToCart(p, i.toString())"
                    class="btn btn-paddle pad-right">
                    <i class="fa fa-plus" aria-hidden="true"></i>
                  </button>
                  
                </ng-template>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
<!-- 🎇 -->