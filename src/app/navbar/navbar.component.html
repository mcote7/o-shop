<!--  -->
<nav class="navbar navbar-expand-sm fixed-top o-navbar">
  <div class="container-fluid">
    
    <a 
      class="navbar-brand"
      (click)="closeMenus()"
      routerLink="/">
      O-shop
    </a>
    
    <!-- TODO CHANGE TO ICON BURGER || X -->
    <button 
      (click)="handleMenuCollapse()"
      class="o-navbar-toggler" type="button" data-bs-toggle="collapse"
      data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown"
      aria-expanded="false" aria-label="Toggle navigation">
      menu
      <span class="nav-toggle-icon" *ngIf="isMenuCollapsed">&#x25B2;</span>
      <span class="nav-toggle-icon" *ngIf="!isMenuCollapsed">&#x25BC;</span>
    </button>
    
    <div 
      class="collapse navbar-collapse"
      [class.show]="!isMenuCollapsed"
      id="navbarNavDropdown">
      
      <ul class="navbar-nav">
        
        <li class="nav-item">
          <a 
            class="nav-link"
            (click)="closeMenus()"
            routerLink="/shopping-cart"
            routerLinkActive="active-link">
            Shopping Cart
          </a>
        </li>
        
        <ng-template #anonymousUser>
          <li class="nav-item">
            <a 
              class="nav-link"
              (click)="closeMenus()"
              routerLink="/login"
              routerLinkActive="active-link">
              Login
            </a>
          </li>
        </ng-template>
        
        <li 
          *ngIf="appUser; else anonymousUser"
          class="nav-item dropdown">
          
          <a 
            class="nav-link dropdown-toggle"
            [class.active-link]="!isDropdownCollapsed"
            (click)="handleDropdownCollapse()"
            id="navbarDropdownMenuLink" role="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            <!-- USER NAME -->
            {{appUser.name}}
            <span class="nav-toggle-icon" *ngIf="isDropdownCollapsed">&#x25B2;</span>
            <span class="nav-toggle-icon" *ngIf="!isDropdownCollapsed">&#x25BC;</span>
          </a>
          
          <ul 
            class="dropdown-menu"
            [class.show]="!isDropdownCollapsed"
            aria-labelledby="navbarDropdownMenuLink">
            
            <li>
              <a 
                (click)="closeMenus()"
                class="dropdown-item" routerLink="/my/orders"
                routerLinkActive="active-dropdown-link">
                My Orders
              </a>
            </li>
            
            <li>
              <a 
                (click)="logout()"
                class="dropdown-item mb-3">
                Log Out
              </a>
            </li>
            
            <!-- admin only -->
            <ng-container *ngIf="appUser.isAdmin">
              <li style="border-top: 1px solid rgba(0,0,0,0.15);padding-top: 1.25rem;">
                <a 
                  (click)="closeMenus()"
                  class="dropdown-item" routerLink="/admin/orders"
                  title="&nbsp;Admin access.&nbsp;âœ”"
                  routerLinkActive="active-dropdown-link">
                    Manage Orders ðŸ›¡
                </a>
              </li>
              
              <li>
                <a 
                  (click)="closeMenus()"
                  class="dropdown-item" routerLink="/admin/products"
                  title="&nbsp;Admin access.&nbsp;âœ”"
                  routerLinkActive="active-dropdown-link">
                    Manage Products ðŸ›¡
                </a>
              </li>
            </ng-container>
            <!-- not admin -->
            <ng-container *ngIf="!appUser.isAdmin">
              <li style="border-top: 1px solid rgba(0,0,0,0.15);padding-top: 1.25rem;">
                <a 
                  class="dropdown-item not-admin"
                  title="&nbsp;Admin access only.&nbsp;ðŸ›‘">
                    Manage Orders ðŸ›¡
                </a>
              </li>
              
              <li>
                <a 
                  class="dropdown-item not-admin"
                  title="&nbsp;Admin access only.&nbsp;ðŸ›‘">
                    Manage Products ðŸ›¡
                </a>
              </li>
            </ng-container>
            
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <div class="avocado"></div>
</nav>
<!-- ðŸ’Ž -->